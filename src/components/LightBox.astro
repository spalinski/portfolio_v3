---
const { im, css } = Astro.props;
import { Image } from "astro:assets";

import { nanoid } from "nanoid";

let imId;
---

<div class={css}>
  <Image src={im} alt="" id={(imId = nanoid())} class="object-contain" />
</div>

<!-- Lightbox Container -->
<div id="lightbox" class="fixed inset-0 z-10 hidden bg-black/85">
  <div class="flex items-center justify-center">
    <img
      id="lightbox-image"
      class="z-50 max-h-screen h-full w-full object-contain"
      src=""
      alt=""
    />
  </div>
</div>

<script define:vars={{ imId }}>
  const image = document.getElementById(imId);
  const lightbox = document.getElementById("lightbox");
  const lightboxImage = document.getElementById("lightbox-image");

  image.addEventListener("click", () => openLightbox());
  lightbox.addEventListener("click", () => closeLightbox());

  function openLightbox() {
    lightboxImage.src = image.src;
    lightbox.classList.remove("hidden");
  }

  function closeLightbox() {
    lightbox.classList.add("hidden");
  }
</script>
